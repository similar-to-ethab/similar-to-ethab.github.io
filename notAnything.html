<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Rotating Game</title>
    <script src="./js/coreClassChanges.js" charset="utf-8"></script>
    <style media="screen">
    * {
      box-sizing: border-box;
      /*-moz-user-select: -moz-none;
     -khtml-user-select: none;
     -webkit-user-select: none;

     / *
       Introduced in IE 10.
       See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/
     * /
     -ms-user-select: none;
     user-select: none;*/
    }
      #board {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(2, 1fr);
        width:20px;
        height: 20px;
        background-color: lightblue;
      }

      .quadrant{
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(4, 1fr);
        height: 33vw;
        width:33vw;
        /*border-style:solid;*/
        border: 1px solid black;
        background-color: lightgrey;
        text-align: center;
      }
      h1 {
        /*border: 1px solid black;*/
        background-color: white;
        margin: auto;
        padding-top:auto;
        width:70%;
        height:70%;
        border-radius: 50%;
      }

      .player1clicked {
        background-color: black;
      }
      .player2clicked {
        background-color: blue;
      }
    </style>
  </head>
  <body>
<label><button type="button" name="topLeft2" onclick="doRotateTwice(0);">Top Left</button></label>

    <div id="board">
      <div class="quadrant" id="quadrant1">
        <h1 class='1x1 000' id='000'>hi</h1><!--  colxrow  -->
        <h1 class='1x2 001' id='001'></h1>
        <h1 class='1x3 002' id='002'></h1>
        <h1 class='1x4 003' id='003'></h1>

        <h1 class='2x1 010' id='010'></h1>
        <h1 class='2x2 011' id='011'></h1>
        <h1 class='2x3 012' id='012'></h1>
        <h1 class='2x4 013' id='013'>hi</h1>

        <h1 class='3x1 020' id='020'></h1>
        <h1 class='3x2 021' id='021'></h1>
        <h1 class='3x3 022' id='022'></h1>
        <h1 class='3x4 023' id='023'></h1>

        <h1 class='4x1 003' id='003'></h1>
        <h1 class='4x2 031' id='031'></h1>
        <h1 class='4x3 032' id='032'></h1>
        <h1 class='4x4 033' id='033'>hi</h1>


      </div>
      <div class="quadrant" id="quadrant2">
        <h1 class='1x1 100' id='100'>hi</h1>
        <h1 class='1x2 101' id='101'></h1>
        <h1 class='1x3 102' id='102'></h1>
        <h1 class='1x4 103' id='103'></h1>

        <h1 class='2x1 110' id='110'></h1>
        <h1 class='2x2 111' id='111'></h1>
        <h1 class='2x3 112' id='112'></h1>
        <h1 class='2x4 113' id='113'>hi</h1>

        <h1 class='3x1 120' id='120'></h1>
        <h1 class='3x2 121' id='121'></h1>
        <h1 class='3x3 122' id='122'></h1>
        <h1 class='3x4 123' id='123'></h1>

        <h1 class='4x1 130' id='130'></h1>
        <h1 class='4x2 131' id='131'></h1>
        <h1 class='4x3 132' id='132'></h1>
        <h1 class='4x4 133' id='133'>hi</h1>
      </div>
      <div class="quadrant" id="quadrant3">
        <h1 class='1x1 200' id='200'>hi</h1>
        <h1 class='1x2 201' id='201'></h1>
        <h1 class='1x3 202' id='202'></h1>
        <h1 class='1x4 203' id='203'></h1>

        <h1 class='2x1 210' id='210'></h1>
        <h1 class='2x2 211' id='211'></h1>
        <h1 class='2x3 212' id='212'></h1>
        <h1 class='2x4 213' id='213'>hi</h1>

        <h1 class='3x1 220' id='220'></h1>
        <h1 class='3x2 221' id='221'></h1>
        <h1 class='3x3 222' id='222'></h1>
        <h1 class='3x4 223' id='223'></h1>

        <h1 class='4x1 230' id='230'></h1>
        <h1 class='4x2 231' id='231'></h1>
        <h1 class='4x3 232' id='232'></h1>
        <h1 class='4x4 233' id='233'>hi</h1>
      </div>
      <div class="quadrant" id="quadrant4">
        <h1 class='1x1 300' id='300'>hi</h1>
        <h1 class='1x2 301' id='301'></h1>
        <h1 class='1x3 302' id='302'></h1>
        <h1 class='1x4 303' id='303'></h1>

        <h1 class='2x1 310' id='310'></h1>
        <h1 class='2x2 311' id='311'></h1>
        <h1 class='2x3 312' id='312'></h1>
        <h1 class='2x4 313' id='313'>hi</h1>

        <h1 class='3x1 320' id='320'></h1>
        <h1 class='3x2 321' id='321'></h1>
        <h1 class='3x3 322' id='322'></h1>
        <h1 class='3x4 323' id='323'></h1>

        <h1 class='4x1 330' id='330'></h1>
        <h1 class='4x2 331' id='331'></h1>
        <h1 class='4x3 332' id='332'></h1>
        <h1 class='4x4 333' id='333'>hi</h1>
      </div>

    </div>

    <script type="text/javascript">

/*  use jquert and change class styles and classes  */
var playerTurn = 1;

var board = document.getElementById('board');
var blocks = [];

const classList = ['1x1','1x2','1x3','1x4','2x1','2x2','2x3','2x4','3x1','3x2','3x3','3x4','4x1','4x2','4x3','4x4'];

for (let q = 0; q < 4; q++) {
  blocks[q]=[];
  for (let c = 0; c < 4; c++) {
    blocks[q][c]=[];
    for (let r = 0; r < 4; r++) {
      blocks[q][c][r] = {group:(c+1).toString() + "x" + (r+1).toString(), status:0, oldStatus:0};
      blocks[q][c][r].el = document.getElementsByClassName(blocks[q][c][r].group)[q];
    }
  }
}


function doRotateTwice(q = 0) {
  blocks[q].forEach(function(c, indexC){ /*  use jquery and change class styles and classes  */
    c.forEach(function(r, indexR){
        // changing the C x R
      let classNamePathI = q.toString() + (3 - indexC).toString() + (3 - indexR).toString(); // initial after rotation
      let classNamePathF = q.toString() + indexC.toString() + indexR.toString(); // final
      //console.log(r.status,r.oldStatus);
      console.log(r.el, classNamePathF);
      changeStatus(classNamePathI, r); // iffy on this :(

      colorChange(r);

      // will change id AFTER everything else is changed

      // change class of piece
      //r.el.classList

      //r.el = document.getElementById(classNamePathF);


      // so first, i will change the values in blocks
      // then i will change the colors of each block
      // from there, things will go by ear

    });

  });
  blocks[q].forEach(function(c, indexC){
    c.forEach(function(r, indexR){
      r.oldStatus = r.status;
    });
  });
  console.log(blocks[q]);
}

function changeStatus(FinalPath,r){ // call near beginning of rotate function
  //console.log(r.status);
  r.status = blocks[FinalPath[0]][FinalPath[1]][FinalPath[2]].oldStatus;
  console.log(r.status);
}

function colorChange(r){
  if (r.oldStatus == 0){
    r.el.classList.remove('player1clicked','player2clicked');
  }
  else if (r.oldStatus == 1) {
    r.el.classList.add('player1clicked');
    r.el.classList.remove('player2clicked');
  }
  else {
    r.el.classList.add('player2clicked');
    r.el.classList.remove('player1clicked');
  }
}


function playerChange(el) {
  if (el.tagName != 'DIV' && !el.classList.contains('player1clicked') && !el.classList.contains('player2clicked')) {
    el.classList.add('player' + playerTurn + 'clicked');
    blocks[el.id[0]][el.id[1]][el.id[2]].status = playerTurn;
    blocks[el.id[0]][el.id[1]][el.id[2]].oldStatus = playerTurn;
    playerTurn = playerTurn%2 + 1;
  }
}


document.getElementById('quadrant1').addEventListener('click', function(e) {
  let el = e.target;
  playerChange(el);
});
document.getElementById('quadrant2').addEventListener('click', function(e) {
  let el = e.target;
  playerChange(el);
});
document.getElementById('quadrant3').addEventListener('click', function(e) {
  let el = e.target;
  playerChange(el);
});
document.getElementById('quadrant4').addEventListener('click', function(e) {
  let el = e.target;
  playerChange(el);
});




    </script>
  </body>
</html>
