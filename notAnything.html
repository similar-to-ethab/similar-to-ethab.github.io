<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Rotating Game</title>
    <script src="./js/coreClassChanges.js" charset="utf-8"></script>
    <style media="screen">
    * {
      box-sizing: border-box;
      /*-moz-user-select: -moz-none;
     -khtml-user-select: none;
     -webkit-user-select: none;

     / *
       Introduced in IE 10.
       See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/
     * /
     -ms-user-select: none;
     user-select: none;*/
    }
      #board {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(2, 1fr);
        width:20px;
        height: 20px;
        background-color: lightblue;
      }

      .quadrant{
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(4, 1fr);
        height: 33vw;
        width:33vw;
        /*border-style:solid;*/
        border: 1px solid black;
        background-color: lightgrey;
        text-align: center;
      }
      h1 {
        /*border: 1px solid black;*/
        background-color: white;
        margin: auto;
        padding-top:auto;
        width:70%;
        height:70%;
        border-radius: 50%;
      }

      .player1clicked {
        background-color: black;
      }
      .player2clicked {
        background-color: blue;
      }
    </style>
  </head>
  <body>
<label><button type="button" name="topLeft2" onclick="doRotateTwice(0);">Top Left</button></label>

    <div id="board">
      <div class="quadrant" id="quadrant1">
        <h1 class='1x1 000' id='000'>hi</h1><!--  colxrow  -->
        <h1 class='1x2 010' id='010'></h1>
        <h1 class='1x3 020' id='020'></h1>
        <h1 class='1x4 030' id='030'></h1>

        <h1 class='2x1 001' id='001'></h1>
        <h1 class='2x2 011' id='011'></h1>
        <h1 class='2x3 021' id='021'></h1>
        <h1 class='2x4 031' id='031'>hi</h1>

        <h1 class='3x1 002' id='002'></h1>
        <h1 class='3x2 012' id='012'></h1>
        <h1 class='3x3 022' id='022'></h1>
        <h1 class='3x4 032' id='032'></h1>

        <h1 class='4x1 003' id='003'></h1>
        <h1 class='4x2 013' id='013'></h1>
        <h1 class='4x3 023' id='023'></h1>
        <h1 class='4x4 033' id='033'>hi</h1>


      </div>
      <div class="quadrant" id="quadrant2">
        <h1 class='1x1 100' id='100'>hi</h1>
        <h1 class='1x2 110' id='110'></h1>
        <h1 class='1x3 120' id='120'></h1>
        <h1 class='1x4 130' id='130'></h1>

        <h1 class='2x1 101' id='101'></h1>
        <h1 class='2x2 111' id='111'></h1>
        <h1 class='2x3 121' id='121'></h1>
        <h1 class='2x4 131' id='131'>hi</h1>

        <h1 class='3x1 102' id='102'></h1>
        <h1 class='3x2 112' id='112'></h1>
        <h1 class='3x3 122' id='122'></h1>
        <h1 class='3x4 132' id='132'></h1>

        <h1 class='4x1 103' id='103'></h1>
        <h1 class='4x2 113' id='113'></h1>
        <h1 class='4x3 123' id='123'></h1>
        <h1 class='4x4 133' id='133'>hi</h1>
      </div>
      <div class="quadrant" id="quadrant3">
        <h1 class='1x1 200' id='200'>hi</h1>
        <h1 class='1x2 210' id='210'></h1>
        <h1 class='1x3 220' id='220'></h1>
        <h1 class='1x4 230' id='230'></h1>

        <h1 class='2x1 201' id='201'></h1>
        <h1 class='2x2 211' id='211'></h1>
        <h1 class='2x3 221' id='221'></h1>
        <h1 class='2x4 231' id='231'>hi</h1>

        <h1 class='3x1 202' id='202'></h1>
        <h1 class='3x2 212' id='212'></h1>
        <h1 class='3x3 222' id='222'></h1>
        <h1 class='3x4 232' id='232'></h1>

        <h1 class='4x1 203' id='203'></h1>
        <h1 class='4x2 213' id='213'></h1>
        <h1 class='4x3 223' id='223'></h1>
        <h1 class='4x4 233' id='233'>hi</h1>
      </div>
      <div class="quadrant" id="quadrant4">
        <h1 class='1x1 300' id='300'>hi</h1>
        <h1 class='1x2 310' id='310'></h1>
        <h1 class='1x3 320' id='320'></h1>
        <h1 class='1x4 330' id='330'></h1>

        <h1 class='2x1 301' id='301'></h1>
        <h1 class='2x2 311' id='311'></h1>
        <h1 class='2x3 321' id='321'></h1>
        <h1 class='2x4 331' id='331'>hi</h1>

        <h1 class='3x1 302' id='302'></h1>
        <h1 class='3x2 312' id='312'></h1>
        <h1 class='3x3 322' id='322'></h1>
        <h1 class='3x4 332' id='332'></h1>

        <h1 class='4x1 303' id='303'></h1>
        <h1 class='4x2 313' id='313'></h1>
        <h1 class='4x3 323' id='323'></h1>
        <h1 class='4x4 333' id='333'>hi</h1>
      </div>

    </div>

    <script type="text/javascript">

/*  use jquert and change class styles and classes  */
var playerTurn = 1;

var board = document.getElementById('board');
var blocks = [];

const classList = ['1x1','1x2','1x3','1x4','2x1','2x2','2x3','2x4','3x1','3x2','3x3','3x4','4x1','4x2','4x3','4x4'];

for (var q = 0; q < 4; q++) {
  blocks[q]=[];
  for (var c = 0; c < 4; c++) {
    blocks[q][c]=[];
    for (var r = 0; r < 4; r++) {
      blocks[q][c][r] = {group:(r+1).toString() + "x" + (c+1).toString(), status:0};
      blocks[q][c][r].el = document.getElementsByClassName(blocks[q][c][r].group)[q];
    }
  }
}


function doRotateTwice(q=0) {
  //path = el.id.split('');
  //blocks[path[0]][path[1]][path[2]].status = 1;
  blocks[q].forEach(function(c, indexC){ /*  use jquery and change class styles and classes  */
    c.forEach(function(r, indexR){


        // changing the C x R
      //console.log(r.el.classList);


      var classNamePathI = q.toString() + (3 - indexC).toString() + (3 - indexR).toString(); // initial after rotation
      var classNamePathF = q.toString() + indexC.toString() + indexR.toString(); // final

      changeStatus(classNamePathI, r); // iffy on this :(

      colorChange(r);

      //console.log(r.el.classList);
          //r.el = document.getElementById(classNamePathI);
      //console.log(classNamePathI);
      r.el.classList.remove(classNamePathI);
      r.el.classList.add(classNamePathF);
      //console.log(r.el.classList);
      //console.log(className);
      //console.log(q.toString());
      //console.log(r.el.classList.contains(classNamePath));
      //console.log(classNamePath);
      /*if (){
        console.log(true);
      } else {
        console.log(false);
      }*/
      //document.getElementsByClassName(className);
      //className[2] = (4 - parseInt(className[2])).toString();
      //console.log(className);
      //r.el.classList.add(className);
      //r.group = className;

      //className = r.el.classList[0];
      //r.el.classList.remove(className);
      //className = q.toString() + (3 - indexR).toString() + (3 - indexC).toString();

      //console.log(className);

      //r.el.classList.add(className);

      // will change id AFTER everything else is changed

      //r.el.classList.remove

      // change class of piece
      //r.el.classList

      //r.el = document.getElementById(className);


      // so first, i will change the values in blocks
      // then i will change the colors of each block
      // from there, things will go by ear

    });

  });
  console.log(blocks[q]);
}

function changeStatus(FinalPath,r){ // call near beginning of rotate function
  if (document.getElementById(FinalPath).classList.contains('player1clicked')){
    r.status = 1;

  }
  else if (document.getElementById(FinalPath).classList.contains('player2clicked')){
    r.status = 2
  }
  else {
    r.status = 0;
  }
}

function colorChange(r){
  if (r.status == 0){
    r.el.classList.remove('player1clicked','player2clicked');
  }
  else if (r.status == 1) {
    r.el.classList.add('player1clicked');
    r.el.classList.remove('player2clicked');
  }
  else {
    r.el.classList.add('player2clicked');
    r.el.classList.remove('player1clicked');
  }
}


function playerChange(el, player) {
  if (el.tagName != 'DIV') {
    //console.log(el);

    if (el.classList.contains('player1clicked') || el.classList.contains('player2clicked')) {
      //console.log(player);

      return player;
    }
    else if (player == 1){
      el.classList.add('player1clicked');
      //doRotateTwice(0);
      //path = el.id.split('');
      //blocks[path[0]][path[1]][path[2]].status = 1;

      return 2; // player + 1
    }
    else {
      el.classList.add('player2clicked');
      //console.log(playerTurn);
      path = el.id;

      r.status = 2;
      return 1; // player - 1
    }
  }
  else {
    return player;
  }
}


document.getElementById('quadrant1').addEventListener('click', function(e) {
  var el = e.target;
  playerTurn = playerChange(el, playerTurn);
  //console.log(el.classList);
});
document.getElementById('quadrant2').addEventListener('click', function(e) {
  var el = e.target;
  playerTurn = playerChange(el, playerTurn);
});
document.getElementById('quadrant3').addEventListener('click', function(e) {
  var el = e.target;
  playerTurn = playerChange(el, playerTurn);
});
document.getElementById('quadrant4').addEventListener('click', function(e) {
  var el = e.target;
  playerTurn = playerChange(el, playerTurn);
});


//var r1c1 = document.getElementsByClassName('1x1');


/*
for (var bc = 0; bc < 2; bc++) {
  blocksInBlocks[bc] = [];
  for (var br = 0; br < 2; br++) {
    blocksInBlocks[bc][br] = [];
    for (var c = 0; c < blocksInBlocksLength; c++) {
      blocksInBlocks[bc][br][c] = [];
      for (var r = 0; r < blocksInBlocksLength; r++) {
        //if(r%2 + c%2 == 1){

          //blocksInBlocks[bc][br][c][r] = { x:0, y:0, status:0, color:1, changed:false};
        //}
        //else { // r%2+x%2 == 0,2
          //blocksInBlocks[bc][br][c][r] = { x:0, y:0, status:0, color:0, changed:false};
        //}

      }
    }
  }
}*/

    </script>
  </body>
</html>
